<app-header></app-header>

<!-- Main Container -->
<div class="main-container">
  <!-- Sidebar -->
  <aside class="sidebar">
    <nav class="sidebar-nav">
      <button routerLink="/criacao-tickets" class="nav-item">
        Criar Ticket
      </button>
      <button routerLink="/andamentos" class="nav-item active">
        Tickets em andamento
      </button>
      <button routerLink="/finalizados" class="nav-item">
        Finalizados
      </button>
      <button routerLink="/historico" class="nav-item">
        Histórico de tickets
      </button>
    </nav>
    
    <div class="sidebar-footer">
    </div>
  </aside>

  <!-- Content Area -->
  <main class="content-area">
    <div class="form-container">
      <h2>Tickets em Andamento</h2>
      
      <div class="tickets-list">
        <div *ngIf="tickets.length === 0" class="alert alert-info">
          Nenhum ticket em andamento encontrado.
        </div>

        <div *ngFor="let ticket of tickets" class="ticket-card" (dblclick)="openTicketModal(ticket)">
          <div class="ticket-header">
            <h5 class="ticket-title">Ticket #{{ ticket.id }}</h5>
            <div class="ticket-badges">
              <span class="badge badge-priority">{{ ticket.prioridade }}</span>
              <span class="badge badge-area">{{ ticket.area }}</span>
            </div>
          </div>
          <p class="ticket-description">{{ ticket.problema }}</p>
        </div>
      </div>
    </div>
  </main>
</div>

<!-- Modal de Detalhes do Ticket -->
<div class="modal-overlay" *ngIf="showTicketModal" (click)="closeTicketModal()">
  <div class="ticket-modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>Detalhes do Ticket #{{ selectedTicket?.id }}</h3>
    </div>
    
    <div class="modal-content" *ngIf="selectedTicket">
      <div class="detail-row">
        <strong>ID:</strong> {{ selectedTicket.id }}
      </div>
      <div class="detail-row">
        <strong>Área:</strong> {{ selectedTicket.area }}
      </div>
      <div class="detail-row">
        <strong>Prioridade:</strong> {{ selectedTicket.prioridade }}
      </div>
      <div class="detail-row">
        <strong>Status:</strong> {{ getStatusLabel(selectedTicket.status) }}
      </div>
      <div class="detail-row">
        <strong>Descrição:</strong>
        <p class="description">{{ selectedTicket.problema }}</p>
      </div>
    </div>
    
    <div class="modal-footer">
      <button class="btn btn-secondary" (click)="closeTicketModal()">Fechar</button>
    </div>
  </div>
</div>
